<!DOCTYPE html>
<html lang="ja" data-bs-theme="auto">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="プレハブ小屋">
        <link rel="canonical" href="https://github.com/showa-yojyo/taoup/context/contrasts.html">
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Contrasts - The Art of Unix Programming 読書ノート</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/fontawesome.min.css" rel="stylesheet">
        <link href="../css/brands.min.css" rel="stylesheet">
        <link href="../css/solid.min.css" rel="stylesheet">
        <link href="../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" disabled>
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <link href="../css/style.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../index.html">The Art of Unix Programming 読書ノート</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href="../index.html" class="nav-link">Home</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle active" aria-current="page" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Notes</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../preface.html" class="dropdown-item">Preface</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Context</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="philosophy.html" class="dropdown-item">Philosophy</a>
</li>
            
<li>
    <a href="history.html" class="dropdown-item">History</a>
</li>
            
<li>
    <a href="contrasts.html" class="dropdown-item active" aria-current="page">Contrasts</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Design</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../design/modularity.html" class="dropdown-item">Modularity</a>
</li>
            
<li>
    <a href="../design/textuality.html" class="dropdown-item">Textuality</a>
</li>
            
<li>
    <a href="../design/transparency.html" class="dropdown-item">Transparency</a>
</li>
            
<li>
    <a href="../design/multiprogram.html" class="dropdown-item">Multiprogramming</a>
</li>
            
<li>
    <a href="../design/minilanguages.html" class="dropdown-item">Minilanguages</a>
</li>
            
<li>
    <a href="../design/generation.html" class="dropdown-item">Generation</a>
</li>
            
<li>
    <a href="../design/configuration.html" class="dropdown-item">Configuration</a>
</li>
            
<li>
    <a href="../design/interface.html" class="dropdown-item">Interfaces</a>
</li>
            
<li>
    <a href="../design/optimization.html" class="dropdown-item">Optimization</a>
</li>
            
<li>
    <a href="../design/complexity.html" class="dropdown-item">Complexity</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Implementation</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../implementation/languages.html" class="dropdown-item">Languages</a>
</li>
            
<li>
    <a href="../implementation/tools.html" class="dropdown-item">Tools</a>
</li>
            
<li>
    <a href="../implementation/reuse.html" class="dropdown-item">Reuse</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Community</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../community/portability.html" class="dropdown-item">Portability</a>
</li>
            
<li>
    <a href="../community/documentation.html" class="dropdown-item">Documentation</a>
</li>
            
<li>
    <a href="../community/opensource.html" class="dropdown-item">Open Source</a>
</li>
            
<li>
    <a href="../community/futures.html" class="dropdown-item">Futures</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="nav-item">
                                <a href="https://github.com/showa-yojyo/taoup/issues" class="nav-link">Issues</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="history.html" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../design/modularity.html" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="https://github.com/showa-yojyo/taoup/edit/main/docs/context/contrasts.md" class="nav-link"><i class="fa-brands fa-github"></i> Edit on GitHub</a>
                            </li>
                            <li class="nav-item dropdown">
                              <button id="theme-menu" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme" class="nav-link dropdown-toggle">
                                <i class="fa-solid fa-circle-half-stroke fa-fw"></i>
                                <span class="d-lg-none ms-2">Toggle theme</span>
                              </button>
                              <ul class="dropdown-menu dropdown-menu-end">
                                <li>
                                  <button class="dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                                    <i class="fa-solid fa-sun fa-fw"></i>
                                    <span class="ms-2">Light</span>
                                    <i class="fa-solid fa-check ms-auto d-none"></i>
                                  </button>
                                </li>
                                <li>
                                  <button class="dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                                    <i class="fa-solid fa-moon fa-fw"></i>
                                    <span class="ms-2">Dark</span>
                                    <i class="fa-solid fa-check ms-auto d-none"></i>
                                  </button>
                                </li>
                                <li>
                                  <button class="dropdown-item d-flex align-items-center" data-bs-theme-value="auto" aria-pressed="true">
                                    <i class="fa-solid fa-circle-half-stroke fa-fw"></i>
                                    <span class="ms-2">Auto</span>
                                    <i class="fa-solid fa-check ms-auto"></i>
                                  </button>
                                </li>
                              </ul>
                            </li>
                    </ul>
                </div>
            </div>
        </div>
        <script src="../js/darkmode.js"></script>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="2"><a href="#the-elements-of-operating-system-style" class="nav-link">The Elements of Operating-System Style</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="3"><a href="#what-is-the-operating-systems-unifying-idea" class="nav-link">What Is the Operating System's Unifying Idea?</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="3"><a href="#multitasking-capability" class="nav-link">Multitasking Capability</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="3"><a href="#cooperating-processes" class="nav-link">Cooperating Processes</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="3"><a href="#internal-boundaries" class="nav-link">Internal Boundaries</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="3"><a href="#file-attributes-and-record-structures" class="nav-link">File Attributes and Record Structures</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="3"><a href="#binary-file-formats" class="nav-link">Binary File Formats</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="3"><a href="#preferred-user-interface-style" class="nav-link">Preferred User Interface Style</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="3"><a href="#intended-audience" class="nav-link">Intended Audience</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="3"><a href="#entry-barriers-to-development" class="nav-link">Entry Barriers to Development</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="2"><a href="#operating-system-comparisons" class="nav-link">Operating-System Comparisons</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="3"><a href="#vms" class="nav-link">VMS</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="3"><a href="#macos" class="nav-link">MacOS</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="3"><a href="#os2" class="nav-link">OS/2</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="3"><a href="#windows-nt" class="nav-link">Windows NT</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="3"><a href="#beos" class="nav-link">BeOS</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="3"><a href="#mvs" class="nav-link">MVS</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="3"><a href="#vmcms" class="nav-link">VM/CMS</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="3"><a href="#linux" class="nav-link">Linux</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="2"><a href="#what-goes-around-comes-around" class="nav-link">What Goes Around, Comes Around</a>
              <ul class="nav flex-column">
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="chapter-3-contrasts">Chapter 3. Contrasts<a class="headerlink" href="#chapter-3-contrasts" title="Permanent link">&para;</a></h1>
<p>Unix の古典的な方法と、他の主要な OS 固有の設計やプログラミング様式を比較することが、Unix の OS としての設計と、その周辺で発展してきたプログラム設計の哲学との関連をたどるのに有益だと著者は言う。</p>
<!-- condescending: treating someone as if you are more important or more intelligent than them -->

<div class="toc"><span class="toctitle">見出し一覧</span><ul>
<li><a href="#the-elements-of-operating-system-style">The Elements of Operating-System Style</a><ul>
<li><a href="#what-is-the-operating-systems-unifying-idea">What Is the Operating System's Unifying Idea?</a></li>
<li><a href="#multitasking-capability">Multitasking Capability</a></li>
<li><a href="#cooperating-processes">Cooperating Processes</a></li>
<li><a href="#internal-boundaries">Internal Boundaries</a></li>
<li><a href="#file-attributes-and-record-structures">File Attributes and Record Structures</a></li>
<li><a href="#binary-file-formats">Binary File Formats</a></li>
<li><a href="#preferred-user-interface-style">Preferred User Interface Style</a></li>
<li><a href="#intended-audience">Intended Audience</a></li>
<li><a href="#entry-barriers-to-development">Entry Barriers to Development</a></li>
</ul>
</li>
<li><a href="#operating-system-comparisons">Operating-System Comparisons</a><ul>
<li><a href="#vms">VMS</a></li>
<li><a href="#macos">MacOS</a></li>
<li><a href="#os2">OS/2</a></li>
<li><a href="#windows-nt">Windows NT</a></li>
<li><a href="#beos">BeOS</a></li>
<li><a href="#mvs">MVS</a></li>
<li><a href="#vmcms">VM/CMS</a></li>
<li><a href="#linux">Linux</a></li>
</ul>
</li>
<li><a href="#what-goes-around-comes-around">What Goes Around, Comes Around</a></li>
</ul>
</div>
<h2 id="the-elements-of-operating-system-style">The Elements of Operating-System Style<a class="headerlink" href="#the-elements-of-operating-system-style" title="Permanent link">&para;</a></h2>
<p>全体的に見て、OS に関する設計とプログラミングの様式は次の三つに起源があるという：</p>
<ul>
<li>OS 設計者の意図</li>
<li>プログラミング環境における経費と制限が強制する統一性</li>
<li>成り行き任せの文化上の偏り</li>
</ul>
<h3 id="what-is-the-operating-systems-unifying-idea">What Is the Operating System's Unifying Idea?<a class="headerlink" href="#what-is-the-operating-systems-unifying-idea" title="Permanent link">&para;</a></h3>
<p>Unix と他の OS を対比する際の最も基本的な質問は次のようなものだという：</p>
<blockquote>
<p>Does it have unifying ideas that shape its development, and if so how do they
differ from Unix's?</p>
<p>To design the perfect anti-Unix, have no unifying idea at all, just an
incoherent pile of ad-hoc features.</p>
</blockquote>
<p>Unix と正反対の OS とは何であるかを即答している。面白い。</p>
<h3 id="multitasking-capability">Multitasking Capability<a class="headerlink" href="#multitasking-capability" title="Permanent link">&para;</a></h3>
<blockquote>
<p>One of the most basic ways operating systems can differ is in the extent to
which they can support multiple concurrent processes.</p>
</blockquote>
<p>現代人の感覚からすると、複数プロセスの同時実行はあって当然だろうと考える。</p>
<p>次の事実は必修：</p>
<blockquote>
<p>Unix has <em>preemptive multitasking</em>, in which timeslices are allocated by a
scheduler which routinely interrupts or pre-empts the running process in order
to hand control to the next one. Almost all modern operating systems support
preemption.</p>
</blockquote>
<p>スケジューラーという主体が OS に存在して、プロセスの集合に対して実行期間の順序と時間を計画的に割り当てる。次のプロセスが制御できるように、今のプロセスに割り込み、つまり先取りして実行期間を充てがう。</p>
<p>なお、マルチユーザー機能はここでは忘れていい。</p>
<p>以上により、正反対の Unix の設計には次のいずれかを必要とする：</p>
<ul>
<li>マルチタスクをまったくサポートしない</li>
<li>マルチタスクは支援するが、プロセス管理を多くの制約や特殊な状況で囲い込み、それ
  を実際に利用するのがかなり難しい</li>
</ul>
<h3 id="cooperating-processes">Cooperating Processes<a class="headerlink" href="#cooperating-processes" title="Permanent link">&para;</a></h3>
<p>マルチプロセスの話題の次はプロセス間通信だ。</p>
<blockquote>
<p>In the Unix experience, inexpensive process-spawning and easy inter-process
communication (IPC) makes a whole ecology of small tools, pipes, and filters
possible.</p>
</blockquote>
<p>プロセスの生成が高価であったり、制御が困難で柔軟性に欠けたりすることがあってはならない。</p>
<p>パイプ等のプロセス間通信手段の重要な性質に、通信するプログラム同士の機能分離を促進するのに単純な水準に抑えるというものがある。</p>
<p>プロセス間通信手段がないシステムでは、プログラム間では精巧なデータ構造を共有することで通信を行う。この構造の問題点は、通信するプログラムの種類が増えるとデータ構造が平方オーダーで増大することだ。本書では MS Office 製品を例に挙げている。</p>
<!-- promiscuous: 見さかいのない -->

<p>以上により、正反対の Unix の設計には次のすべてを必要とする：</p>
<ul>
<li>プロセス生成を著しく高価なものにする</li>
<li>プロセス制御を困難で柔軟性のないものにする</li>
<li>プロセス間通信を支援しないか、中途半端に支援された後付けのものにする</li>
</ul>
<h3 id="internal-boundaries">Internal Boundaries<a class="headerlink" href="#internal-boundaries" title="Permanent link">&para;</a></h3>
<p>最初のパラグラフはコマンド <code>rm -rf *</code> の実行に確認メッセージが出ない事実と、一般に権限が異なる複数アカウントの支援との関係について述べていて興味深い。</p>
<p>Unix には少なくとも三階層の内部境界層がある。目的は悪意のある使用者やバグのあるプログラムから防護するというものだ：</p>
<ul>
<li>メモリー管理 (MMU)</li>
<li>特権グループ</li>
<li>安全機密上重要な機能を、信頼できるコードの可能な限り小さな断片に限定する</li>
</ul>
<p>Unix はハードウェアのメモリー管理ユニット(MMU) を使って、別々のプロセスが他のプロセスのメモリーアドレス空間に侵入しないようにしている。</p>
<p>一般アカウントのプロセスは、許可なく他のアカウントのファイルを変更したり、読んだりすることは不可能だ。</p>
<p>正反対の Unix の設計には次のすべてを必要とする：</p>
<ul>
<li>暴走プロセスが実行中のプログラムを破壊、毀損可能であるように、メモリー管理を破
  棄、回避する。</li>
<li>特権グループが弱いか、存在しない。</li>
<li>シェルや GUI 全体のような大量のコードを信頼する。それにより、当該コードにバグ
  があったり攻撃が成功したりすると、システム全体への脅威となる。</li>
</ul>
<p>他者のファイルを改竄可能であるということは、例えば、マクロウイルスがワープロの制御を奪取し、ハードドライブを初期化することの可能性を意味する。</p>
<h3 id="file-attributes-and-record-structures">File Attributes and Record Structures<a class="headerlink" href="#file-attributes-and-record-structures" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Unix files have neither record structure nor attributes.</p>
</blockquote>
<p>正反対の Unix の設計には次のすべてを必要とする：</p>
<ul>
<li>面倒なレコード構造の集合を用意する。</li>
<li>ファイル属性を追加する。システムがそれに大きく依存するようにする。</li>
</ul>
<h3 id="binary-file-formats">Binary File Formats<a class="headerlink" href="#binary-file-formats" title="Permanent link">&para;</a></h3>
<p>本書の邦訳版を初めて読んだときに、最初に感動したのはこの節だったと記憶している。</p>
<p>バイナリーファイルがテキストファイルに劣る状況、理由は、次の二つをまずは憶えておけばいい：</p>
<ul>
<li>フィルターが役に立たない</li>
<li>データファイルへのアクセスは専用ツールからのみとなる</li>
</ul>
<p>後者の弊害は、開発者がデータファイルよりもツールを中心に考えるようになり、異なるバージョンのデータファイルに互換性がなくなることだ。</p>
<blockquote>
<p>To design the perfect anti-Unix, make all file formats binary and opaque, and
require heavyweight tools to read and edit them.</p>
</blockquote>
<p>OS に直接関わらないファイルにも、これらの要件を求めていることに注意。</p>
<h3 id="preferred-user-interface-style">Preferred User Interface Style<a class="headerlink" href="#preferred-user-interface-style" title="Permanent link">&para;</a></h3>
<blockquote>
<p>The Unix lesson is the opposite: that weak CLI facilities are a less obvious
but equally severe deficit.</p>
</blockquote>
<p>CLI 機能が貧弱であることは目立たないものの、致命的な弱点であると考えるのが Unix
式だ。</p>
<blockquote>
<p>To design the perfect anti-Unix, have no CLI and no capability to script
programs — or, important facilities that the CLI cannot drive.</p>
</blockquote>
<p>正反対の Unix の設計には次のいずれかを必要とする：</p>
<ul>
<li>CLI がなく、かつプログラムをスクリプト化する機能がない</li>
<li>CLI では操作できない重要な機能がある</li>
</ul>
<h3 id="intended-audience">Intended Audience<a class="headerlink" href="#intended-audience" title="Permanent link">&para;</a></h3>
<p>PC ばかり利用していると、OS 設計はシステムを使用する人により決まるという観点がすっぽりと抜け落ちる。次を読んで反省する：</p>
<blockquote>
<p>The design of operating systems varies in response to the expected audience
for the system. Some operating systems are intended for back rooms, some for
desktops. Some are designed for technical users, others for end users. Some
are intended to work standalone in real-time control applications, others for
an environment of timesharing and pervasive networking.</p>
</blockquote>
<p>OS の重要な区分の一つにクライアントとサーバーがある。クライアントは次のように説明される：</p>
<ul>
<li>軽量</li>
<li>単一の使用者だけを支援する</li>
<li>小さな機械で稼働できる</li>
<li>用事が済んだら電源を切ることが可能であること</li>
<li>プリエンプティブマルチタスクがない</li>
<li>低遅延のために最適化されている</li>
<li>派手な UI に資源の多くを費やしている</li>
</ul>
<p>サーバーは次のように説明される：</p>
<ul>
<li>重量級</li>
<li>連続稼動が可能</li>
<li>単位時間あたりの処理量が最適化されている</li>
<li>複数セッションを処理するために完全 pre-emptively multitasking である</li>
</ul>
<blockquote>
<p>Unix is often said to have been written by programmers for programmers — an
audience that is notoriously tolerant of interface complexity.</p>
</blockquote>
<p>寛容なことが悪いことで知られるのは困ったものだ。</p>
<!-- notoriously: in a way that is famous for something bad -->
<!-- abhor: to hate it very much, especially for moral reasons -->

<blockquote>
<p>To design the perfect anti-Unix, write an operating system that thinks it
knows what you're doing better than you do. And then adds injury to insult by
getting it wrong.</p>
</blockquote>
<p>これが禅の境地の一つか。</p>
<h3 id="entry-barriers-to-development">Entry Barriers to Development<a class="headerlink" href="#entry-barriers-to-development" title="Permanent link">&para;</a></h3>
<p>単なる使用者と開発者の間には高い壁がある。その壁となる重要な要因二つとは：</p>
<ul>
<li>the monetary cost of development tools</li>
<li>the time cost of gaining proficiency as a developer</li>
</ul>
<!-- proficiency: 熟練度 -->

<blockquote>
<p>Inexpensive tools and simple interfaces support casual programming, hobbyist
cultures, and exploration. Programming projects can be small (often, formal
project structure is plain unnecessary), and failure is not a catastrophe.
This changes the style in which people develop code; among other things, they
show less tendency to over-commit to failed approaches.</p>
<p>Many people who write code under Unix do not think of it as writing code —
they think of it as writing scripts to automate common tasks, or as
customizing their environment.</p>
</blockquote>
<p>これは手練れのプログラマー全員に共通する性質だと思う。</p>
<p>正反対の Unix の設計では、くだけたプログラミングが不可能だ。</p>
<h2 id="operating-system-comparisons">Operating-System Comparisons<a class="headerlink" href="#operating-system-comparisons" title="Permanent link">&para;</a></h2>
<p>最初の<a href="http://www.catb.org/esr/writings/taoup/html/graphics/os-history.png">グラフ</a>は、本節で調査する時分割 OS の家系図だ。</p>
<ul>
<li>灰色箱は Unix 以外の OS</li>
<li>実線箱は本書執筆時点で存命の OS</li>
<li>矢印の実線、破線、点線は設計思想の影響度を大まかに示す（この順に強い）</li>
<li>要素 Unix は次のとおり：</li>
</ul>
<blockquote>
<p>The ‘Unix’ box includes all proprietary Unixes, including both AT&amp;T and
early Berkeley versions. The ‘Linux’ box includes the open-source Unixes,
all of which launched in 1991.</p>
</blockquote>
<h3 id="vms">VMS<a class="headerlink" href="#vms" title="Permanent link">&para;</a></h3>
<p>VMS は家系図では Windows NT の直接の祖先だ。知らない OS なので流し読む。</p>
<ul>
<li>VMS は Digital Equipment Corporation の小型計算機 VAX 用に開発された OS だ。</li>
<li>VMS には完全な preemptive multitasking があるものの、プロセス生成がべらぼうに
  高くつく。</li>
<li>VMS は長くて読みやすい COBOL 風システムコマンドとコマンドオプションを特徴とし
  ている。また、実行プログラムとコマンドライン構文については包括的なオンラインヘ
  ルプがある。</li>
<li>VMS は立派な内部境界層がある：</li>
<li>VMS ツールは当初高価で、インターフェイスも複雑だった。プログラマーの学習がたい
  へんだった。</li>
<li>VMS はクライアント・サーバーの区別を先取りしていた。</li>
</ul>
<h3 id="macos">MacOS<a class="headerlink" href="#macos" title="Permanent link">&para;</a></h3>
<p>家系図を見ると MacOS は始祖の一つに見える。実際のところは本文に記述がある。</p>
<blockquote>
<p>Except where specifically noted, the discussion here applies to pre-OS-X
versions.</p>
</blockquote>
<p>MacOS には Mac Interface Guidelines というたいへん強力な統一思想がある。</p>
<ul>
<li>アプリケーションの GUI の見てくれ、振る舞いを詳細に規定している。</li>
<li>ガイドラインの一貫性は Mac 使用者の文化に大きな影響を与えた。</li>
</ul>
<blockquote>
<p>All programs have GUIs. There is no CLI at all. Scripting facilities are
present but much less commonly used than under Unix; many Mac programmers
never learn them.</p>
</blockquote>
<p>内部境界層の仕組みがかなり弱いことなどにより、安全保障を破ることが容易いとある。そうする輩がほとんどいないからそうなっていない：</p>
<blockquote>
<p>The MacOS system of internal boundaries is very weak. There is a wired-in
assumption that there is but a single user, so there are no per-user privilege
groups. Multitasking is cooperative, not pre-emptive. All MultiFinder
applications run in the same address space, so bad code in any application can
corrupt anything outside the operating system's low-level kernel. Security
cracks against MacOS machines are very easy to write; the OS has been spared
an epidemic mainly because very few people are motivated to crack it.</p>
</blockquote>
<p>Mac プログラマーは Unix プログラマーとは逆の方向に設計する傾向がある。つまり、エンジンの外側からではなく、インターフェイスの内側から設計する。</p>
<blockquote>
<p>The intended role for the Macintosh was as a client operating system for
nontechnical end users, implying a very low tolerance for interface
complexity. Developers in the Macintosh culture became very, very good at
designing simple interfaces.</p>
</blockquote>
<p>以前述べられたように、OS は使用者に合わせて設計されるものだから、善悪の問題ではない。</p>
<blockquote>
<p>Developers in the Macintosh culture became very, very good at designing simple
interfaces.</p>
</blockquote>
<p>Unix が旧型 MacOS から借用した考えもある：</p>
<blockquote>
<p>Classic MacOS has been end-of-lifed. Most of its facilities have been imported
into MacOS X, which mates them to a Unix infrastructure derived from the
Berkeley tradition. At the same time, leading-edge Unixes such as Linux are
beginning to borrow ideas like file attributes (a generalization of the
resource fork) from MacOS.</p>
</blockquote>
<h3 id="os2">OS/2<a class="headerlink" href="#os2" title="Permanent link">&para;</a></h3>
<p>OS/2 はグラフで MS-DOS と VM/CMS を直接の先祖に持つ OS だ。</p>
<blockquote>
<p>Like Unix, OS/2 was built to be preemptively multitasking and would not run on
a machine without an MMU (early versions simulated an MMU using the 286's
memory segmentation). Unlike Unix, OS/2 was never built to be a multiuser
system. Process-spawning was relatively cheap, but IPC was difficult and
brittle. Networking was initially focused on LAN protocols, but a TCP/IP stack
was added in later versions. There were no programs analogous to Unix service
daemons, so OS/2 never handled multi-function networking very well.</p>
<p>OS/2 had both a CLI and GUI. Most of the positive legendry around OS/2 was
about the Workplace Shell (WPS), the OS/2 desktop. （中略） This is the one
area of the design in which OS/2 achieved a level of capability which Unix
arguably has not yet matched. The WPS was a clean, powerful, object-oriented
design with understandable behavior and good extensibility. Years later it
would become a model for Linux's GNOME project.</p>
</blockquote>
<p>OS/2 は玄人向けではない使用者を想定して設計されたか：</p>
<blockquote>
<p>The intended audience for OS/2 was business and nontechnical end users,
implying a low tolerance for interface complexity. It was used both as a
client operating system and as a file and print server.</p>
</blockquote>
<p>Unix ソフトウェアを移植するために EMX という環境が現れる：</p>
<blockquote>
<p>In the early 1990s, developers in the OS/2 community began to migrate to a
Unix-inspired environment called EMX that emulated POSIX interfaces. Ports of
Unix software started routinely showing up under OS/2 in the latter half of
the 1990s.</p>
<p>Anyone could download EMX, which included the GNU Compiler Collection and other
open-source development tools.</p>
</blockquote>
<p>OS/2 を研究することの関心の在処：</p>
<blockquote>
<p>OS/2 is interesting as a case study in how far a multitasking but single-user
operating-system design can be pushed.</p>
</blockquote>
<h3 id="windows-nt">Windows NT<a class="headerlink" href="#windows-nt" title="Permanent link">&para;</a></h3>
<p>なぜ見出しが Windows NT であるのか：</p>
<blockquote>
<p>All of Microsoft's operating systems since the demise of Windows ME in 2000
have been NT-based; Windows 2000 was NT 5, and Windows XP (current in 2003) is
NT 5.1. NT is genetically descended from VMS, with which it shares some
important characteristics.</p>
</blockquote>
<!-- demise: death -->

<p>例えば私が今使っている Windows 10 は Windows NT のバージョン 10.0 の一つだ。</p>
<p>Windows NT 核心技術は数年ごとに陳腐化する。技術の世代が変わるたびに、開発者は基本的なことを別の方法で学び直す必要があった。</p>
<p>これは詳しく教えて欲しい：</p>
<blockquote>
<p>Socket programming has no unifying data object analogous to the Unix
everything-is-a-file-handle, so multiprogramming and network applications that
are simple in Unix require several more fundamental concepts in NT.</p>
</blockquote>
<p>Preemptive multitasking は支援されているが、プロセス生成は高価。当時の Unix と比べると最大で一桁高い。</p>
<p>スクリプト機能は弱く、OS はバイナリーファイル形式を多用する。</p>
<p>最初に本書を読んだときに、レジストリーに関する次の記述に膝を叩いた記憶がある。アプリケーション全部の構成を一箇所に封じるのはダメだ：</p>
<blockquote>
<p>System and user configuration data are centralized in a central properties
registry rather than being scattered through numerous dotfiles and system data
files as in Unix. This also has consequences throughout the design:</p>
<ul>
<li>The registry makes the system completely non-orthogonal. Single-point
  failures in applications can corrupt the registry, frequently making the
  entire operating system unusable and requiring a reinstall.</li>
<li>The <em>registry creep</em> phenomenon: as the registry grows, rising access costs
  slow down all programs.</li>
</ul>
</blockquote>
<p>NT の内部境界層はきわめて脆弱だ。本書では境界に穴があるという表現をしている。</p>
<p>DLL 地獄に関する分析。Python 開発でのまずい仮想環境の性質と似ている：</p>
<blockquote>
<p>Because Windows does not handle library versioning properly, it suffers from a
chronic configuration problem called “DLL hell”, in which installing new
programs can randomly upgrade (or even downgrade!) the libraries on which
existing programs depend. This applies to the vendor-supplied system libraries
as well as to application-specific ones: it is not uncommon for an application
to ship with specific versions of system libraries, and break silently when it
does not have them.</p>
</blockquote>
<p>NT はどういう使用者を想定して設計されたのか：</p>
<blockquote>
<p>The intended audience for the NT operating systems is primarily nontechnical
end users, implying a very low tolerance for interface complexity. It is used
in both client and server roles.</p>
</blockquote>
<p>NT プログラマーは趣味人と専門家に二分している：</p>
<blockquote>
<p>The result of this history is a sharp dichotomy between the design styles
practiced by amateur and professional NT developers — the two groups barely
communicate. While the hobbyist culture of small tools and shareware is very
much alive, professional NT projects tend to produce monster monoliths even
bulkier than those characteristic of ‘elitist’ operating systems like VMS.</p>
</blockquote>
<!-- dichtomy: 二分法 -->

<p>当時の Unix 風シェル機能の使用可能性は次のとおりだが、現代ならば WSL 一択だ：</p>
<blockquote>
<p>Unix-like shell facilities, command sets, and library APIs are available under
Windows through third-party libraries including UWIN, Interix, and the
open-source Cygwin.</p>
</blockquote>
<h3 id="beos">BeOS<a class="headerlink" href="#beos" title="Permanent link">&para;</a></h3>
<p>家系図によると BeOS は MacOS の子だ。</p>
<blockquote>
<p>BeOS tended to use binary file formats and the native database built into the
file system, rather than Unix-like textual formats.</p>
</blockquote>
<p>BeOS は GUI を好みつつも、CLI 支援も素晴らしい：</p>
<blockquote>
<p>The command-line shell of BeOS was a port of bash(1), the dominant open-source
Unix shell, running through a POSIX compatibility library. Porting of Unix CLI
software was, by design, trivially easy. Infrastructure to support the full
panoply of scripting, filters, and service daemons that goes with the Unix
model was in place.</p>
</blockquote>
<p>これまでの記述から BeOS はかなり筋が良い OS のように思う。なぜ私が聞いたことがなかったのが不思議だ。その理由は最後のパラグラフで窺い知れる。最後の一行を引用する：</p>
<!-- astute: 抜け目がない -->

<blockquote>
<p>BeOS finally succumbed in 2001 to a combination of anticompetitive maneuvering
by Microsoft (lawsuit in progress as of 2003) and competition from variants of
Linux that had been adapted for multimedia handling.</p>
</blockquote>
<h3 id="mvs">MVS<a class="headerlink" href="#mvs" title="Permanent link">&para;</a></h3>
<blockquote>
<p>MVS (Multiple Virtual Storage) is IBM's flagship operating system for its
mainframe computers.</p>
</blockquote>
<p>メインフレームなら読まなくていいか？</p>
<blockquote>
<p>The unifying idea of MVS is that all work is batch; the system is designed to
make the most efficient possible use of the machine for batch processing of
huge amounts of data, with minimal concessions to interaction with human
users.</p>
</blockquote>
<p>メインフレームは大量データを処理するシステムに他ならない。そのせいなのか、通信機能が生のファイルくらいしかない：</p>
<blockquote>
<p>Programs in a job communicate through temporary files; filters and the like
are nearly impossible to do in a usable manner.</p>
</blockquote>
<p>ということはファイルシステムは優れているのかと思いきや、そういうことはなかった：</p>
<blockquote>
<p>File system security was an afterthought in the original design. However, when
security was found to be necessary, IBM added it in an inspired fashion:</p>
</blockquote>
<!-- afterthought: 後知恵 -->

<blockquote>
<p>This did allow TCP/IP to supplant IBM's native SNA (Systems Network
Architecture) as the network protocol of choice fairly seamlessly.</p>
</blockquote>
<!-- supplant: take the place or move into the position of -->

<blockquote>
<p>Casual programming for MVS is almost nonexistent except within the community
of large enterprises that run MVS.</p>
</blockquote>
<p>メインフレーム機の日曜プログラマーのようなものは聞いたことがない。</p>
<h3 id="vmcms">VM/CMS<a class="headerlink" href="#vmcms" title="Permanent link">&para;</a></h3>
<p>これらも IBM のメインフレームだ。</p>
<blockquote>
<p>VM/CMS is IBM's <em>other</em> mainframe operating system. Historically speaking, it is
Unix's uncle:</p>
</blockquote>
<p>共通の祖先が CTSS であり、Unix と CTSS の間に Multics が来る。</p>
<blockquote>
<p>Although CMS is record-oriented, the records are essentially equivalent to the
lines that Unix textual tools use.</p>
</blockquote>
<p>テキストエディターとしては XEDIT が多用される。これはスクリーンエディターだ。</p>
<p>Rexx というシェルや Perl, Python と似たところのあるスクリプト言語がプログラミングを支援する。くだけたプログラミングができることが重要となる：</p>
<blockquote>
<p>Consequently, casual programming (especially by system administrators) is very
important on VM/CMS. Free cycles permitting, admins often prefer to run
production MVS in a virtual machine rather than directly on the bare iron, so
that CMS is also available and its flexibility can be taken advantage of.
(There are CMS tools that permit access to MVS file systems.)</p>
</blockquote>
<p>仮想機械の話がいきなり出て来た。</p>
<blockquote>
<p>Since the year 2000, IBM has been promoting VM/CMS on mainframes to an
unprecedented degree — as ways to host thousands of virtual Linux machines at
once.</p>
</blockquote>
<p>VM/CMS と Linux 機の関係が述べられた。</p>
<!-- unprecedented: 前例のない -->

<h3 id="linux">Linux<a class="headerlink" href="#linux" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Linux does not include any code from the original Unix source tree, but it was
designed from Unix standards to behave like a Unix.</p>
</blockquote>
<p>この後は、逆に、Linux が「古典的な」Unix の伝統から逸脱していることを示す方向性をいくつか見ていく。</p>
<blockquote>
<p>Linux users and developers, on the other hand, have been adapting themselves
to address the nontechnical user's fear of CLIs. They have moved to building
GUIs and GUI tools much more intensively than was the case in old-school Unix,
or even in contemporary proprietary Unixes.</p>
</blockquote>
<p>GUI にも開発意識が向いているというのがまず一点。</p>
<blockquote>
<p>One consequence is that Linux features binary-package systems far more
sophisticated than any analogs in proprietary Unixes, with interfaces designed
(as of 2003, with only mixed success) to be palatable to nontechnical end
users.</p>
</blockquote>
<p>パッケージ管理システムを備えているというのがもう一点。例えば apt(8) のようなものだ。</p>
<blockquote>
<p>The Linux community wants, more than the old-school Unixes ever did, to turn
their software into a sort of universal pipefitting for connecting together
other environments. （中略） The long-term goal is subsumption; Linux emulates
so it can absorb.</p>
</blockquote>
<p>『ドラゴンボール』のセルのようなものだと考えられる。</p>
<!-- subsumption: ???? -->

<blockquote>
<p>The remaining proprietary Unixes (such as Solaris, HP-UX, AIX, etc.) are
designed to be big products for big IT budgets.</p>
</blockquote>
<p>AIX とは懐かしい。</p>
<h2 id="what-goes-around-comes-around">What Goes Around, Comes Around<a class="headerlink" href="#what-goes-around-comes-around" title="Permanent link">&para;</a></h2>
<p>因果応報というか自業自得というか……。</p>
<!-- plausible: seeming likely to be true, or able to be believed; もっともらしい -->
<!-- subsume: to include or place within something larger or more comprehensive -->

<blockquote>
<p>MacOS has been subsumed by a Unix derivative.</p>
</blockquote>
<p>そうなの？</p>
<blockquote>
<p>Only Microsoft Windows remains as a viable competitor independent of the Unix
tradition.</p>
</blockquote>
<!-- viable: able to work as intended or able to succeed; 上手くいきそうな -->

<p>これは正しそうだ。</p>
<blockquote>
<p>We pointed out Unix's strengths in Chapter 1, and they are certainly part of
the explanation. But it's actually more instructive to look at the obverse of
that answer and ask which weaknesses in Unix's competitors did them in.</p>
</blockquote>
<!-- instructive: providing a lot of useful information; ためになる -->

<p>この思考法は面白い。裏を返せば敵の弱みがわかる。</p>
<p>最も明白な共通の問題は非移植性だという。</p>
<p>ネットワークが普及した世界における OS の要件を三つ挙げている：</p>
<ul>
<li>複数使用者機能（特権グループが複数あること）</li>
<li>強力な複数仕事機能</li>
<li>効率的なプロセス間通信</li>
</ul>
<blockquote>
<p>But as the designers of BeOS noticed, the requirements of pervasive networking
cannot be met without implementing something very close to general-purpose
timesharing. Single-user client operating systems cannot thrive in an
Internetted world.</p>
</blockquote>
<p>汎用の時分割にひじょうに近いものを実装しなければ、ネットワークの中断時にそれを検知し、自動再接続することができないという問題を分析していく。</p>
<blockquote>
<p>With non-Unix models for timesharing effectively dead by 1990, there were not
many possible responses client operating-system designers could mount to this
challenge.</p>
<p>Retrofitting server-operating-system features like multiple privilege classes
and full multitasking onto a client operating system is very difficult</p>
</blockquote>
<ul>
<li>旧バージョンのクライアントとの互換性を壊す可能性が高い</li>
<li>一般的に安定性や安全保障の問題が多く、脆弱かつ不満のある結果しかもたらさない</li>
</ul>
<blockquote>
<p>As with buildings, it's easier to repair superstructure on top of a solid
foundation than it is to replace the foundations without trashing the
superstructure.</p>
</blockquote>
<p>この比喩は良い。</p>
<blockquote>
<p>Thus, the Unix design proved more capable of reinventing itself as a client
than any of its client-operating-system competitors were of reinventing
themselves as servers</p>
</blockquote>
<p>これは何か読解を誤っているのか、意味が汲めない。</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>© 2025 プレハブ小屋 All rights reserved.</p>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js"></script>
        <script src="../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
